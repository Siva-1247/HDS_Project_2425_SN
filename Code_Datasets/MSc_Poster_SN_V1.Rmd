---
title: 'Geospatial Analysis of COVID-19 Vaccination: A Local Electoral Area Analysis in Ireland'
author:
  - name: 'Sivagami Nedumaran'
  - name: 'Ramya Sri Jayshankar'
    affil: 1
affiliation:
  - num: 1
    address: 'School of Mathematical and Statistical Sciences, University of Galway'
logoleft_name: https&#58;//sport.universityofgalway.ie/assets/img/logo2.png
poster_height: '594mm'
poster_width: '841mm'
column_numbers: 4
column_margins: '0.5in'
primary_colour: '#a80050'
secondary_colour: '#84003d'
accent_colour: '#e6007e'
author_textcol: 'white'
title_textsize: '90pt'
author_textsize: '60pt'
body_textsize: '25pt'
output: 
  posterdown::posterdown_html:
    self_contained: true
    pandoc_args: --mathjax
    number_sections: false
knit: pagedown::chrome_print
---

```{css, echo=FALSE}
div.logo_left{
  width: 20%;
}
div.poster_title{
  width: 80%;
}
.section h4 {
    break-after: column;
}
```

<!-- Don't change anything above, except the title and author names, unless you know what you are doing. -->


```{r, include=FALSE}
knitr::opts_chunk$set(echo = FALSE,
                      warning = FALSE,
                      tidy = FALSE,
                      message = FALSE,
                      fig.align = 'center',
                      out.width = "100%")
options(knitr.table.format = "html") 
# Load any additional libraries here
library(tidyverse)
library(plotly)
library(kableExtra)
library(ggplot2)
library(leaflet)
library(sf)
```



# Background and Problem

The COVID-19 pandemic has demonstrated the important role vaccination plays in managing an infectious disease outbreak globally. There are several factors that might affect vaccination uptake, like vaccine center accessibility, urban-rural differences, and demographic variables. However, the influence of spatial determinants has not been widely done and this has potential to aid public health policy making during healthcare emergencies^[Chen, H., Cao, Y., Feng, L. et al. Understanding the spatial heterogeneity of COVID-19 vaccination uptake in England. BMC Public Health 23, 895 (2023). https://doi.org/10.1186/s12889-023-15801-w]. 

<!-- You can add references by inserting the following ^[reference details here] -->


## Objectives of Project
1. We aim to analyze the spatial and demographic determinants of COVID-19 vaccination rates across Local Electoral Areas (LEAs) in Ireland, distinguishing between urban and rural areas and identifying differences over time

2. This includes assessing accessibility to vaccination centers (initial centers, GPs, and pharmacies) and evaluating relationships between demographic factors and vaccination rates

3. Additionally, we examine the fit of non-linear logistic growth models to study vaccination uptake trends and infer spatial and demographic inequities.
# Data Sources and Datasets

Data on centers offering COVID-19 vaccines are of three types:
1.GPs - [Find a GP](https://www2.hse.ie/services/find-a-gp/)
2.Pharmacies - [Offering COVID-19 and Flu Vaccines](https://www2.hse.ie/services/pharmacies-flu-and-covid-vaccines/)
3.Initial Vaccination Centers for COVID-19 - [Archived webpage](https://web.archive.org/web/20211229085102/https://www2.hse.ie/services/covid-19-vaccination-centres/)

They were scarped using rvest in R and selenium on python (for dynamic pages)
They were all geocoded to obtain longitudes and latitudes using Google Maps API

LEA vaccination rates are in table CDC47 in [CSO website](https://data.cso.ie/)

LEA Boundary files were taken from [OSI](https://data-osi.opendata.arcgis.com/datasets/osi::cso-local-electoral-areas-national-statistical-boundaries-2022-ungeneralised/about)

LEA Boundary files were linked to the CDC47 dataset by processing the LEA names to be same on both files and then using merge function on R to combine them on the LEA names. 

<!-- This #### below causes the columns to break -->
<!-- You can change where you put these breaks, and the "column_numbers: 4" argument in the YAMLS header to change the layout of the poster, with care! -->
# Early Results / Descriptive Statistics of Datasets

Figure \@ref(fig:standard-plot), and Figure \@ref(fig:morefigs)resent an analysis of Primary Vaccination Rates, with the former highlighting rates by Local Electoral Area (LEA) and the latter depicting trends over time on a monthly basis.

Additionally, Figure \@ref(fig:morefigs)provides a more detailed breakdown, distinguishing vaccination rates between urban and rural areas for each month.

```{r standard-plot, out.width='100%', fig.height=6, echo=FALSE, fig.align='center', fig.cap='LEA vs Primary Vaccination Rates'}
Mdata <- st_read("C:/Users/Sivagami Nedumaran/Downloads/Merged_Data_Final.shp")
Data_84 <- st_transform(Mdata,4326)
Data_84_centroids <- st_centroid(Data_84)
leaflet(Data_84_centroids) %>%
  addTiles() %>%
  addCircleMarkers(
    radius = ~prmry_cm / 20,
    fillColor = "#8B475D",
    fillOpacity = 0.5,
    stroke = FALSE,
    popup = ~paste("<strong>LEA:</strong>", cso_lea, "<br>",
                   "<strong>Vaccination Rate:</strong>", prmry_cm, "%")
  )
```

####

```{r morefigs, out.width='100%', fig.height=6, echo=FALSE, fig.align='center', fig.cap='Primary Vaccination Course Completion Over Time'}
vaccination_rate = read.csv("CDC47_Stats.csv")
vaccination_rate <- vaccination_rate %>%
  filter(Age.Group=='12 years and over')
vaccine_rate <- vaccination_rate %>% mutate(area_type = case_when(grepl('city|dublin', Local.Electoral.Area, ignore.case = TRUE) ~ 'City', TRUE ~ 'Rural'))
library(lubridate)
library(scales)
vaccine_rate$Month <- parse_date_time(vaccine_rate$Month, orders = "Y B")
library(nlme)
library(mgcv)
vaccine_rate %>%
  filter(!is.na(Primary.Course.Completed....)) %>%
  ggplot(aes(x = Month, y = Primary.Course.Completed...., group = Local.Electoral.Area)) +
  geom_point(size = 2, alpha = 0.6, color = "#96CDCD") +
  geom_smooth(method = "gam", formula = y ~ s(x), se = FALSE, color = "#CD96CD", size = 1) +
  facet_wrap(~ area_type, scales = "free_y") +
  labs(
    title = "Primary Vaccination Course Completion Over Time",
    subtitle = "Grouped by Area Type (Urban/Rural)",
    x = "Month",
    y = "Vaccination Completion Rate (%)"
  )

```

The centroids of the LEAs were calculated and the distance of these centroids to the [initial vaccination centers](https://web.archive.org/web/20211229085102/https://www2.hse.ie/services/covid-19-vaccination-centres/) were calculated using sf and geodist packages. The below Figure \@ref(fig:plot1) gives the top 10 counties that have the shortest distance to the initial vaccination centers.
```{r plot1, out.width='80%', echo=FALSE, fig.cap='Minimum Distance to Vaccination Center', fig.height=4}
Dist_long <- read.csv("Centroid_distances.csv")
Dist_long$County <- Mdata$county
# Calculate average distance by county and find nearest center
summary_viz <- Dist_long %>%
  group_by(County) %>%
  summarise(
    min_dist = min(Distance)/1000,  # Convert to km
    nearest_center = Center[which.min(Distance)]
  ) %>%
  arrange(min_dist) %>%
  head(10)

# Create single clear visualization
ggplot(summary_viz, aes(x = reorder(County, min_dist), y = min_dist)) +
  geom_bar(stat = "identity", fill = "#EEB4B4", alpha = 0.8) +
  geom_text(aes(label = sprintf("%0.1f km\n%s", min_dist, nearest_center)), 
            hjust = -0.1, size = 3) +
  coord_flip() +  
  theme_minimal() +
  theme(
    axis.text = element_text(size = 10),
    plot.title = element_text(size = 12, face = "bold")
  ) +
  labs(
    title = "Minimum Distance to Vaccination Centers by County",
    x = "County",
    y = "Distance (km)"
  )

```

####

# Next Project Steps

We plan to further analyse:

Geospatial Analysis:
Inspect and extract variables that can be used to demonstrate accessability to the vaccination centers

Demographic Analysis:
Extract local area level demographic summaries
Transform compositional demographic variables for regression modelling.

Model Development:
Implement mixed-effects models for vaccination uptake.
Weight models by LEA population and account for temporal groupings

Feedback and Refinement:
Review intermediate results and refine analysis as needed


# GitHub

The code and datasets for this project can be viewed at our GitHub repository here: https://github.com/ 


# References


